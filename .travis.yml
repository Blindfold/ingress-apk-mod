language: python
python:
  - "3.2"
jdk:
  - oraclejdk7
before_install:
  - sudo apt-get update -qq
  - if [ `uname -m` = x86_64 ]; then sudo apt-get install -qq --force-yes libgd2-xpm ia32-libs ia32-libs-multiarch; fi
  - wget -O android-sdk-linux.tgz http://dl.google.com/android/android-sdk_r22.2.1-linux.tgz
  - tar -zxf android-sdk-linux.tgz
  - export ANDROID_HOME=`pwd`/android-sdk-linux
  - export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools:${ANDROID_HOME}/build-tools/17.0.0/:${ANDROID_HOME}/tools/proguard/bin/
  - echo y | android update sdk --filter android-17,platform-tools,build-tools-17.0.0 --all --no-ui --force
  - wget http://ingress-apk-mod.o4kapuk.info/files/lib.tar.gz
  - tar xvfz lib.tar.gz
  - wget http://dekanszn.ru/ingress-latest.apk
install:
  - pip install -r requirements.txt --use-mirrors
script:
  - git config --global user.email ""
  - git config --global user.name "Ingress apk mod"
  - python bin/import_apk.py ingress-latest.apk
  - python bin/release.py
deploy: 
  secret_access_key: 
    secure: hF+c/etM42EjVVmGCbe15sK19lmLTgQy/Ms/C9+Z7H/k+cP/pE5C9ZDaMjv15IXq+Nq9G1chW7g0/D6yLLnVeV98KECGKEroG6cEzjTuFI29132yP8N5VMskxXtFiPuZE9MvTNLsXaAF4/3PIw4W2GAZl12mu7djrNShwxeH+EE=
  skip_cleanup: true
  provider: s3
  bucket: ingress-apk-mod
  access_key_id: 
    secure: ohCvnV2Hu7gcrxp02yELlRGsPgc4R6FRKFa1+fAoxolqsbG0JsKVJTgjFuWAUaB6NyYJfpPMcSGUcDRKVSl7CmvCgDOq+Ylow5tPSBaGDKfRWSBgS54AvGM4wt/SWRDgYrD8kNgq9JWHiXyGicJFouqZlgnv63fnYvy/KRjj6tQ=
notifications:
  email:
    on_success: never
